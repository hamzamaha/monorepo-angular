<div class="row mt-3">
  <div class="col-md-6">
    <h1>Add orders</h1>
  </div>
  <div class="col-md-6 text-end">
    <a routerLink="/admin/orders" class="btn btn-outline-primary"
      >Back to list</a
    >
  </div>
</div>
<div class="container">
  <form [formGroup]="OrderForm" (ngSubmit)="onAddOrder()">
    <div class="row">
      <div class="col-md-12 shadow p-3 mb-5 bg-body rounded">
        <div class="d-flex mt-3 mb-2">
          <div class="col-md-6">
            <div class="form-group">
              <label for="namee" class="form-label mt-2"
                >Users<span style="font-size: smaller" class="text-muted">
                  (required)</span
                ></label
              >
              <select
                class="form-select"
                formControlName="user"
                id="namee"
                name="user"
              >
                <option *ngFor="let user of userss" [ngValue]="user?._id ?? ''">
                  {{ user.name }}
                </option>
              </select>
              <small
                class="text-danger"
                *ngIf="
                  OrderForm.get('user')?.invalid &&
                  (OrderForm.get('user')?.touched ||
                    OrderForm.get('user')?.dirty)
                "
              >
                <p *ngIf="OrderForm .get('user')?.errors?.['required']">
                  this field is required
                </p>
              </small>
            </div>
            <div class="form-group">
              <label for="shippingAddress" class="form-label mt-2"
                >Shipping Adress</label
              >
              <input
                formControlName="shippingAddress"
                type="text"
                class="form-control"
                id="shippingAddress"
                name="shippingAddress"
                placeholder="Address"
              />
              <small
                class="text-danger"
                *ngIf="
                  OrderForm.get('shippingAddress')?.invalid &&
                  (OrderForm.get('shippingAddress')?.touched ||
                    OrderForm.get('shippingAddress')?.dirty)
                "
              >
                <p
                  *ngIf="OrderForm .get('shippingAddress')?.errors?.['required']"
                >
                  this field is required
                </p>
              </small>
            </div>
            <div class="form-group">
              <label for="invoiceAddress" class="form-label mt-2"
                >invoice Address</label
              >
              <input
                formControlName="invoiceAddress"
                type="text"
                class="form-control"
                id="invoiceAddress"
                name="invoiceAddress"
                placeholder="invoice Address"
              />
              <small
                class="text-danger"
                *ngIf="
                  OrderForm.get('invoiceAddress')?.invalid &&
                  (OrderForm.get('invoiceAddress')?.touched ||
                    OrderForm.get('invoiceAddress')?.dirty)
                "
              >
                <p
                  *ngIf="OrderForm .get('invoiceAddress')?.errors?.['required']"
                >
                  this field is required
                </p>
              </small>
            </div>
          </div>
          <div class="col-md-6 mx-2">
            <div class="form-group">
              <label for="city" class="form-label mt-2">City</label>
              <input
                formControlName="city"
                type="text"
                class="form-control"
                id="city"
                name="city"
                placeholder="City"
              />
              <small
                class="text-danger"
                *ngIf="
                  OrderForm.get('city')?.invalid &&
                  (OrderForm.get('city')?.touched ||
                    OrderForm.get('city')?.dirty)
                "
              >
                <p *ngIf="OrderForm .get('city')?.errors?.['required']">
                  this field is required
                </p>
              </small>
            </div>
            <div class="form-group">
              <label for="country" class="form-label mt-2">Country</label>
              <input
                formControlName="country"
                type="text"
                class="form-control"
                id="country"
                name="country"
                placeholder="Country"
              />
              <small
                class="text-danger"
                *ngIf="
                  OrderForm.get('country')?.invalid &&
                  (OrderForm.get('country')?.touched ||
                    OrderForm.get('country')?.dirty)
                "
              >
                <p *ngIf="OrderForm .get('country')?.errors?.['required']">
                  this field is required
                </p>
              </small>
            </div>
            <div class="form-group">
              <label for="phone" class="form-label mt-2">Phone</label>
              <input
                formControlName="phone"
                type="text"
                class="form-control"
                id="phone"
                name="phone"
                placeholder="Phone"
              />
              <small
                class="text-danger"
                *ngIf="
                  OrderForm.get('phone')?.invalid &&
                  (OrderForm.get('phone')?.touched ||
                    OrderForm.get('phone')?.dirty)
                "
              >
                <p *ngIf="OrderForm .get('phone')?.errors?.['required']">
                  this field is required
                </p>
              </small>
            </div>
          </div>
        </div>

        <table class="table">
          <thead>
            <tr>
              <th>#</th>
              <th>Name</th>
              <th>Quantity</th>
              <th>Action</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let product of productss">
              <td>
                <input (click)="onSelectProduct(product)" type="checkbox" />
              </td>
              <td>{{ product.title }}</td>
              <td>
                <input
                  type="number"
                  name="items"
                  formControlName="items"
                  [value]=""
                  class="qty"
                />
                <small
                  class="text-danger"
                  *ngIf="
                    OrderForm.get('items')?.invalid &&
                    (OrderForm.get('items')?.touched ||
                      OrderForm.get('items')?.dirty)
                  "
                >
                  <p *ngIf="OrderForm .get('items')?.errors?.['required']">
                    this field is required
                  </p>
                </small>
              </td>
              <td>
                <a (click)="onDeleteOrder(product)">
                  <i class="fa fa-trash text-danger" aria-hidden="true"></i
                ></a>
              </td>
            </tr>
          </tbody>
        </table>
        <div class="d-grid">
          <button class="btn btn-primary">
            <i class="fa fa-send" aria-hidden="true"></i> Submit
          </button>
        </div>
      </div>
    </div>
  </form>
</div>
